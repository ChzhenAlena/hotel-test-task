# Hotel REST API

Приложение — RESTful API для управления отелями.
Ссылка на ТЗ: https://docs.google.com/document/d/1eYN9hvjNo6Bu-j4PPK5dFJhmfVSqZkjTJVss8iYNT70/edit?usp=sharing

## Основные эндпоинты

- `GET /property-view/hotels`  
  Получение списка всех отелей с краткой информацией.

- `GET /property-view/hotels/{id}`  
  Подробная информация по конкретному отелю.

- `GET /property-view/search`  
  Поиск отелей по параметрам: `name`, `brand`, `city`, `country`, `amenities`.

- `POST /property-view/hotels`  
  Создание нового отеля.

- `POST /property-view/hotels/{id}/amenities`  
  Добавление списка удобств (amenities) к отелю.

- `GET /property-view/histogram/{param}`  
  Получение количества отелей, сгруппированных по значению параметра (`brand`, `city`, `country`, `amenities`).

## Пример запуска

```bash
mvn spring-boot:run
````

Если используете Maven Wrapper (предпочтительно для автопроверки):

```bash
./mvnw spring-boot:run  # для Linux/MacOS
````

```bash
.\mvnw.cmd spring-boot:run  # для Windows
````

Приложение стартует на порту `8092`.

## Технологии

* Java 21
* Spring Boot
* Spring Data JPA
* Liquibase
* H2 Database (встроенная)

## Дополнительно

* Тесты (unit и интеграционные)
* Swagger-документация
* Архитектура с разделением на слои и использованием паттернов проектирования
* Легкая смена базы данных (MySQL, PostgreSQL, MongoBD и др.) за счёт выделения интерфейсов *DataAccess в доменном слое

## Примечания

* Пагинация намеренно не применяется, поскольку проект запускается в автоматизированной среде, где
  возможны проверки на наличие всех данных.
* В текущей реализации индексы создаются по исходным полям (не expression indexes). Это связано с тем, что H2 (а также некоторые другие движки) не поддерживает индексы по выражениям (lower(name)).
В реальном проекте для ускорения поиска по запросам типа lower(name) = ... рекомендуется:
1) либо заводить отдельное поле для приведённого к нижнему регистру значения (name_lower) и индексировать его,
2) либо использовать индексы по выражениям, если СУБД это поддерживает (CREATE INDEX ON users (lower(name)); для PostgreSQL).
В этом тестовом проекте используется простой индекс по исходному полю для совместимости со всеми СУБД и простоты миграций.
